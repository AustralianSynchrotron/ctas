<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ctas: The Developer&#39;s documentation for the CTAS package.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ctas&#160;<span id="projectnumber">0.5.2</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>The Developer's documentation for the CTAS package. </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>When writing the code of the package I always had in mind possible co-developers so I documented each function, class, members, global variable. I used <a href="http://www.doxygen.org">Doxygen</a> tags for comments to generate the developer documentation automatically.</p>
<h2><a class="anchor" id="intro"></a>
Introduction.</h2>
<p>This package is written more than 99% in the C++ with smal inclusions of C (where external libraries needed it) and one file in the Shell-script. Why did I use C++ for the high load calculations instead of C? I checked the performance of the same reconstruction algorithm written in clean C, and found no difference at all. In the code I use the Object-oriented approach very intensively. Sometimes it can be even redunadant and makes the code more difficult to understand. However, it saves a lot of time and minimizes the text which I have to type.</p>
<h2><a class="anchor" id="struct"></a>
Structure.</h2>
<p>The source files in the "src/executables" directory are for the tools. Each cpp file in this directory represents one particular tool. It makes use of the "clargs" structure holding all variables which are defined through the command-line interface of the tool and the CLI parser in form of the <a class="el" href="structclargs.html#ac5a54b5b965289a3ad0766317ae630dd" title="Parses the arguments passed to the command line.">clargs::clargs</a> constructor. The manual pages of the tools are also made within <a class="el" href="structclargs.html#ac5a54b5b965289a3ad0766317ae630dd" title="Parses the arguments passed to the command line.">clargs::clargs</a> parser using the feature from the poptmx library. Note that each tool has it's own local clargs structure, what is not processed by the Doxygen correctly and therefore read the code itself when you need to hack it. The main function of each tool usually just combines certain classes and/or functions from the libraries which do the actual work.</p>
<p>All tools made in the "src/executables" directory are installed into the "PKGLIBEXECDIR" directory which is usually "$PREFIX/libexec/ctas" (if not rewritten during the configuration). The main executable (source "src/ctas.in") which is actually just a small shell script knows about the path to the tools and executes them as requested. I decided to use this trick in order to avoid installing a number of tools into the bin directory.</p>
<p>The directory "src/common" includes all libraries required for the package. All actual calculations, data processing, CLI parsing etc are performed within these libraries what allows me to keep the size of the code for the tools as short as possible.</p>
<p>The directory "src/blitz-long" contains my own version of the Blitz++ library. Seriously patched and castrated version. First of all this version uses long int instead of int for the array sizes, what allows larger arrays (more than 2^32 elements) what is critical for the modern CT systems. Secondary I removed all components of the library not used in the code. Finally, this version will not install any files into your system - it is used as a self-contained unit within the package.</p>
<h2><a class="anchor" id="algo"></a>
How to add new reconstruction algorithm.</h2>
<p>If you want to play with new CT algorithm (for example you want to implement reconstruction on the GPU or FPGA or whatever), but have no time to write code for the whole infrastructure (sinogram formation, flat field subtraction, filtering windows, etc.) you can plug in your algorithm into the source code (see detailed description for the <a class="el" href="classCTrec.html" title="CT reconstruction class.">CTrec</a> class) and reconstruct real experimental data using your algorithm.</p>
<h2><a class="anchor" id="contrast"></a>
How to add new type of contrast.</h2>
<p>If you want to develop / implement some additional contrast(s) (f.e. X-ray inline, phase, etc), but do not want to write the whole infrastructure, you can do with this package: include your type of contrast into <a class="el" href="classContrast.html" title="Type of the input contrast.">Contrast</a> class, and use one of the CT algorithms from the <a class="el" href="classCTrec.html" title="CT reconstruction class.">CTrec</a> class (or include your own one: see section <a class="el" href="index.html#algo">How to add new reconstruction algorithm.</a>). After that you can build your own all-in-one reconstruction program adding your contrast into the <a class="el" href="classSinoS.html" title="Projections storage.">SinoS</a> class, and looking at the examples in sino_abs.cpp, sino_dei.cpp, ct_abs.cpp and ct_dei.cpp. It is also likely that you want to add a single-projection processing, similar to the "dei" tool (see <a class="el" href="dei_8cpp.html" title="Extracts refraction and/or absorption components of two contrasts taken on the either sides of the an...">dei.cpp</a> for example).</p>
<h2><a class="anchor" id="lic"></a>
License</h2>
<p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 2 or any later version published by the Free Software Foundation; For details see <a href="http://www.gnu.org/copyleft/fdl.html.">http://www.gnu.org/copyleft/fdl.html.</a> </p>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 8 2011 16:05:59 for ctas by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
